{"ast":null,"code":"import axios from \"axios\";\nconst backendURL = process.env.REACT_APP_BACKEND_URL || \"http://localhost:8000\";\n\n// Create axios instance with timeout\nconst api = axios.create({\n  baseURL: backendURL,\n  timeout: 30000,\n  // 30 seconds timeout\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Add request interceptor for rate limiting info\napi.interceptors.request.use(config => {\n  // You can add auth tokens here if needed\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Add response interceptor for error handling\napi.interceptors.response.use(response => response, error => {\n  if (error.code === 'ECONNABORTED') {\n    return Promise.reject({\n      message: \"Request timeout. Please try again.\",\n      timeout: true\n    });\n  }\n  return Promise.reject(error);\n});\nexport const askQuestion = async (question, sessionId = \"default\") => {\n  try {\n    const response = await api.post(\"/ask\", {\n      question,\n      session_id: sessionId\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\"Backend error:\", error.response || error);\n    if (error.response) {\n      // Handle specific HTTP errors\n      switch (error.response.status) {\n        case 429:\n          throw {\n            response: {\n              status: 429,\n              data: \"Rate limit exceeded. Please wait a minute before sending more requests.\"\n            }\n          };\n        case 500:\n          throw {\n            response: {\n              status: 500,\n              data: \"Server error. Please try again later.\"\n            }\n          };\n        case 404:\n          throw {\n            response: {\n              status: 404,\n              data: \"API endpoint not found. Please check the backend URL.\"\n            }\n          };\n        default:\n          throw error;\n      }\n    } else if (error.timeout) {\n      throw {\n        response: {\n          status: 408,\n          data: \"Request timeout. The server is taking too long to respond.\"\n        }\n      };\n    } else {\n      // Network error\n      throw {\n        response: {\n          status: 0,\n          data: \"Network error. Please check your internet connection and ensure the backend server is running.\"\n        }\n      };\n    }\n  }\n};\nexport const createSession = async () => {\n  try {\n    const response = await api.post(\"/sessions/new\");\n    return response.data;\n  } catch (error) {\n    console.error(\"Failed to create session:\", error);\n    throw error;\n  }\n};\nexport const listSessions = async () => {\n  try {\n    const response = await api.get(\"/sessions\");\n    return response.data;\n  } catch (error) {\n    console.error(\"Failed to list sessions:\", error);\n    throw error;\n  }\n};\nexport const clearSession = async sessionId => {\n  try {\n    const response = await api.post(`/sessions/${sessionId}/clear`);\n    return response.data;\n  } catch (error) {\n    console.error(\"Failed to clear session:\", error);\n    throw error;\n  }\n};\nexport const healthCheck = async () => {\n  try {\n    const response = await api.get(\"/health\");\n    return response.data;\n  } catch (error) {\n    console.error(\"Health check failed:\", error);\n    return {\n      status: \"offline\",\n      error: error.message\n    };\n  }\n};\n\n// Export the axios instance for other potential uses\nexport default api;","map":{"version":3,"names":["axios","backendURL","process","env","REACT_APP_BACKEND_URL","api","create","baseURL","timeout","headers","interceptors","request","use","config","error","Promise","reject","response","code","message","askQuestion","question","sessionId","post","session_id","data","console","status","createSession","listSessions","get","clearSession","healthCheck"],"sources":["C:/islamic-agent/frontend/src/api.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst backendURL = process.env.REACT_APP_BACKEND_URL || \"http://localhost:8000\";\r\n\r\n// Create axios instance with timeout\r\nconst api = axios.create({\r\n  baseURL: backendURL,\r\n  timeout: 30000, // 30 seconds timeout\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Add request interceptor for rate limiting info\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    // You can add auth tokens here if needed\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Add response interceptor for error handling\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.code === 'ECONNABORTED') {\r\n      return Promise.reject({ \r\n        message: \"Request timeout. Please try again.\",\r\n        timeout: true \r\n      });\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport const askQuestion = async (question, sessionId = \"default\") => {\r\n  try {\r\n    const response = await api.post(\"/ask\", { \r\n      question, \r\n      session_id: sessionId \r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Backend error:\", error.response || error);\r\n    \r\n    if (error.response) {\r\n      // Handle specific HTTP errors\r\n      switch (error.response.status) {\r\n        case 429:\r\n          throw {\r\n            response: {\r\n              status: 429,\r\n              data: \"Rate limit exceeded. Please wait a minute before sending more requests.\"\r\n            }\r\n          };\r\n        case 500:\r\n          throw {\r\n            response: {\r\n              status: 500,\r\n              data: \"Server error. Please try again later.\"\r\n            }\r\n          };\r\n        case 404:\r\n          throw {\r\n            response: {\r\n              status: 404,\r\n              data: \"API endpoint not found. Please check the backend URL.\"\r\n            }\r\n          };\r\n        default:\r\n          throw error;\r\n      }\r\n    } else if (error.timeout) {\r\n      throw {\r\n        response: {\r\n          status: 408,\r\n          data: \"Request timeout. The server is taking too long to respond.\"\r\n        }\r\n      };\r\n    } else {\r\n      // Network error\r\n      throw {\r\n        response: {\r\n          status: 0,\r\n          data: \"Network error. Please check your internet connection and ensure the backend server is running.\"\r\n        }\r\n      };\r\n    }\r\n  }\r\n};\r\n\r\nexport const createSession = async () => {\r\n  try {\r\n    const response = await api.post(\"/sessions/new\");\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Failed to create session:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const listSessions = async () => {\r\n  try {\r\n    const response = await api.get(\"/sessions\");\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Failed to list sessions:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const clearSession = async (sessionId) => {\r\n  try {\r\n    const response = await api.post(`/sessions/${sessionId}/clear`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Failed to clear session:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const healthCheck = async () => {\r\n  try {\r\n    const response = await api.get(\"/health\");\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Health check failed:\", error);\r\n    return { status: \"offline\", error: error.message };\r\n  }\r\n};\r\n\r\n// Export the axios instance for other potential uses\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}