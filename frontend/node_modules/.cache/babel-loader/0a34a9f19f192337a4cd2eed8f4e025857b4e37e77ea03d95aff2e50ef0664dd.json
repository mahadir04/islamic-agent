{"ast":null,"code":"import axios from \"axios\";\nconst backendURL = process.env.REACT_APP_BACKEND_URL || \"http://localhost:8000\";\nexport const askQuestion = async (question, sessionId = \"default\") => {\n  try {\n    const response = await axios.post(`${backendURL}/ask`, {\n      question,\n      session_id: sessionId // Match backend parameter name\n    });\n    return response.data.answer; // Return just the answer\n  } catch (error) {\n    console.error(\"Backend error:\", error);\n    if (error.response && error.response.status === 422) {\n      // If 422 error, try without session_id (backward compatibility)\n      try {\n        const fallbackResponse = await axios.post(`${backendURL}/ask`, {\n          question\n        });\n        return fallbackResponse.data.answer;\n      } catch (fallbackError) {\n        return \"As-salamu alaykum. I apologize, but I'm having trouble connecting to the Islamic knowledge base. Please make sure the backend server is running on port 8000, or try again later.\";\n      }\n    }\n    return \"As-salamu alaykum. I apologize, but I'm having trouble connecting to the Islamic knowledge base. Please make sure the backend server is running on port 8000, or try again later.\";\n  }\n};\n\n// Add session management functions\nexport const createSession = async () => {\n  try {\n    const response = await axios.post(`${backendURL}/sessions/new`);\n    return response.data;\n  } catch (error) {\n    console.error(\"Failed to create session:\", error);\n    // Fallback: create local session\n    const sessionId = `session_${Date.now()}`;\n    return {\n      session_id: sessionId,\n      message: \"Local session created\"\n    };\n  }\n};\nexport const listSessions = async () => {\n  try {\n    const response = await axios.get(`${backendURL}/sessions`);\n    return response.data;\n  } catch (error) {\n    console.error(\"Failed to list sessions:\", error);\n    return {\n      sessions: [],\n      count: 0\n    };\n  }\n};\nexport const clearSession = async sessionId => {\n  try {\n    const response = await axios.post(`${backendURL}/sessions/${sessionId}/clear`);\n    return response.data;\n  } catch (error) {\n    console.error(\"Failed to clear session:\", error);\n    return {\n      message: \"Local session cleared\"\n    };\n  }\n};\nexport const healthCheck = async () => {\n  try {\n    const response = await axios.get(`${backendURL}/health`);\n    return response.data;\n  } catch (error) {\n    console.error(\"Health check failed:\", error);\n    return {\n      status: \"offline\"\n    };\n  }\n};","map":{"version":3,"names":["axios","backendURL","process","env","REACT_APP_BACKEND_URL","askQuestion","question","sessionId","response","post","session_id","data","answer","error","console","status","fallbackResponse","fallbackError","createSession","Date","now","message","listSessions","get","sessions","count","clearSession","healthCheck"],"sources":["C:/islamic-agent/frontend/src/api.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst backendURL = process.env.REACT_APP_BACKEND_URL || \"http://localhost:8000\";\r\n\r\nexport const askQuestion = async (question, sessionId = \"default\") => {\r\n  try {\r\n    const response = await axios.post(`${backendURL}/ask`, { \r\n      question, \r\n      session_id: sessionId  // Match backend parameter name\r\n    });\r\n    return response.data.answer;  // Return just the answer\r\n  } catch (error) {\r\n    console.error(\"Backend error:\", error);\r\n    \r\n    if (error.response && error.response.status === 422) {\r\n      // If 422 error, try without session_id (backward compatibility)\r\n      try {\r\n        const fallbackResponse = await axios.post(`${backendURL}/ask`, { question });\r\n        return fallbackResponse.data.answer;\r\n      } catch (fallbackError) {\r\n        return \"As-salamu alaykum. I apologize, but I'm having trouble connecting to the Islamic knowledge base. Please make sure the backend server is running on port 8000, or try again later.\";\r\n      }\r\n    }\r\n    \r\n    return \"As-salamu alaykum. I apologize, but I'm having trouble connecting to the Islamic knowledge base. Please make sure the backend server is running on port 8000, or try again later.\";\r\n  }\r\n};\r\n\r\n// Add session management functions\r\nexport const createSession = async () => {\r\n  try {\r\n    const response = await axios.post(`${backendURL}/sessions/new`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Failed to create session:\", error);\r\n    // Fallback: create local session\r\n    const sessionId = `session_${Date.now()}`;\r\n    return { session_id: sessionId, message: \"Local session created\" };\r\n  }\r\n};\r\n\r\nexport const listSessions = async () => {\r\n  try {\r\n    const response = await axios.get(`${backendURL}/sessions`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Failed to list sessions:\", error);\r\n    return { sessions: [], count: 0 };\r\n  }\r\n};\r\n\r\nexport const clearSession = async (sessionId) => {\r\n  try {\r\n    const response = await axios.post(`${backendURL}/sessions/${sessionId}/clear`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Failed to clear session:\", error);\r\n    return { message: \"Local session cleared\" };\r\n  }\r\n};\r\n\r\nexport const healthCheck = async () => {\r\n  try {\r\n    const response = await axios.get(`${backendURL}/health`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Health check failed:\", error);\r\n    return { status: \"offline\" };\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}